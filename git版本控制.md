# Git版本控制

- Git三种状态
    - 已修改(modified)：表示修改了文件，但还没保存到数据库中
    - 已暂存(staged)：表示对一个已修改文件的当前版本做了标记，使其包含在下次提交的快照中
    - 已提交(committed)：表示数据已经保存在本地数据库中

- 查看Git的所有配置以及它们所在的文件
    - `git config --list --show-origin`

- 设置用户名和邮件
    - `git config --global user.name "xxxx"`
    - `git config --global user.email xxxxx`
    - 针对当前仓库可以使用`--local`

- 设置文本编辑器
    - `git config ==global core.editor xxxxx`

- 检查某一项配置
    - `git config <key>`
    - 例如：`git config user.name`

- 获取帮助
    - `git help <verb>`
    - 例如：`git help config`
    - 简明帮助使用`-h`
    - 例如：`git add -h`


## 获取Git仓库

1. 在已存在的目录中初始化仓库
      1. cd 到目标目录下
      2. `git init`, 此时目录下的文件还未被跟踪
      3. `git add`, 指定所需跟踪的文件

2. 克隆现有仓库
      1. `git clone <url>`

- 查看当前文件状态
    - `git status`

- 跟踪新文件
    - `git add <files>`
    - 使用文件或目录的路径作为参数，目录则递归跟踪该目录下的所有文件

- 暂存已修改的文件
    - 也是使用`git add <files>`

- 文件状态简要信息
    - `git status -s`
    - `?`标记表示：新增加的未跟踪文件
    - `A`标记表示：新添加到暂存区的文件
    - `M`标记表示：修改过的文件
    - 输出有两栏，左边表示暂存区的状态，右边表示工作区的状态

- 忽略文件
    - `.gitignore`列出要忽略的文件的模式
    - `.gitignore`的格式规范
        - 所有的空行，`#`号开头的行都会被忽略
        - 使用简化了的正则表达式，递归的应用到整个工作区中
        - 匹配模式可以用(`/`)开头，防止递归
        - 匹配模式可以用(`/`)结尾，指定是目录
        - 忽略指定模式以外的文件或目录，在模式前加(`!`)，取反
        - 简化的正则表达式
            - `*`匹配0个或多个任意字符
            - `[abc]`匹配任何一个列在方括号中的字符
            - `?`只匹配一个任意字符
            - `[0-9]`匹配所有0到9的数字。方括号中使用`-`分隔两字符，表示其范围内都可以匹配
            - 使用两个星号(`**`)表示匹配任意中间目录
                - 例如：`a/**/z`，可以匹配`a/z`, `a/b/z`, `a/b/c/z`等...
        - 一个仓库根目录下的`.gitignore`文件，递归的应用到整个仓库中。子目录下可以有额外的`.gitignore`文件，它的规则只作用于它所在的目录中

- 查看已暂存和未暂存的修改
    - `git diff`不带参数，查看未暂存文件更新了哪些部分
    - `git diff --staged`对比已暂存文件与最后一次提交的文件差异

- 调用其他工具比较差异
    - `git difftool`诸如使用merge, vimdeff等工具

- 查看支持的差异比较工具
      - `git difftool --tool-help`

- 提交更新
    - `git commit`之后输入提交说明
    - `git commit -m "xxxxx"`提交信息与命令放在同一行
    - `git commit -a`加-a选项跳过使用暂存区，自动把所有以跟踪文件暂存之后一并提交

- 移除文件
    - `git rm`从已跟踪文件中移除，然后提交，该文件就不再纳入版本管理
    - `git rm -f`如果要删除之前修改过或暂存区中的文件，必须使用强制删除选项`-f`
    - `git rm --cache`不再跟踪文件，但保留文件在磁盘中，不删除
    - `git rm log/\*.log`删除log/目录下扩展名为.log的所有文件。注意`*`前的`\`，表示Git有自己的文件模式扩展匹配方式，不需要shell帮忙展开
